A CSP instance is a triple \(\mathcal{I} = (\mathcal{X},\mathcal{D},\mathcal{C})\) , where \(\mathcal{X}\) is a finite set of variables, \(\mathcal{D}\) assigns to each variable \(X\in \mathcal{X}\) a finite set \(\mathcal{D}(X)\) , the domain of \(X\) , and \(\mathcal{C}\) is a set of constraints \(C = (s^C,R^C)\) , where for some \(k\geq 1\) , the scope \(s^C = (X_1,\ldots ,X_k)\in \mathcal{X}^k\) is a tuple of variables and \(R^C\subseteq \mathcal{D}(X_1)\times \ldots \times \mathcal{D}(X_k)\) is a \(k\) - ary relation over the corresponding domains. We always assume that the variables in the scope \(s^C\) of a constraint \(C\) are mutually distinct; we can easily transform an instance not satisfying this condition into one that does by adapting the relation \(R^C\) accordingly.  

Slightly abusing terminology, we call a pair \((X,d)\) where \(X\in \mathcal{X}\) and \(d\in \mathcal{D}(X)\) a value for variable \(X\) . For all \(X\in \mathcal{X}\) we let \(\mathcal{V}_X = \{X\} \times \mathcal{D}(X)\) be the set of all values for \(X\) , and we let \(\mathcal{V} = \bigcup_{X\in \mathcal{X}}\mathcal{V}_X\) be the set of all values. We usually denote values by \(\mathcal{U}\) . Working with these values instead of domain elements is convenient because the sets \(\mathcal{V}_X\) , for \(X\in \mathcal{X}\) , are mutually disjoint, whereas the domains \(\mathcal{D}(X)\) are not necessarily.  

An assignment for a CSP instance \(\mathcal{I} = (\mathcal{X},\mathcal{D},\mathcal{C})\) is a mapping \(\alpha\) that assigns a domain element \(\alpha (X)\in \mathcal{D}(X)\) to each variable \(X\) . Alternatively, we may view an assignment as a subset \(\alpha \subseteq \mathcal{V}\) that contains exactly one value from each \(\mathcal{V}_X\) . Depending on the context, we use either view, and we synonymously write \(\alpha (X) = d\) or \((X,d)\in \alpha\) . An assignment \(\alpha\) satisfies a constraint \(C = ((X_1,\ldots ,X_k),R)\) (we write \(\alpha \models C\) ) if \((\alpha (X_1),\ldots ,\alpha (X_k))\in R\) , and \(\alpha\) satisfies \(\mathcal{I}\) , or is a solution to \(\mathcal{I}\) , if it satisfies all constraints in \(\mathcal{C}\) . The objective of a CSP is to decide if a given instance has a satisfying assignment and to find one if it does. To distinguish this problem from the maximization version introduced below, we sometimes speak of the decision version. Specific CSPs such as Boolean satisfiability or graph coloring problems are obtained by restricting the instances considered.  

We define the quality \(Q_{\mathcal{I}}(\alpha)\) of an assignment \(\alpha\) to be the fraction of constraints in \(\mathcal{C}\) satisfied by \(\alpha\) : \(Q_{\mathcal{I}}(\alpha) = |\{C|C\in \mathcal{C},\alpha \models C\} | / |\mathcal{C}|\) . An assignment \(\alpha\) is optimal if it maximizes \(Q_{\mathcal{I}}(\alpha)\) for the instance \(\mathcal{I}\) . The goal of the maximisation problem MAXCSP is to find an optimal assignment for a given instance.  

A soft assignment for a CSP instance \(\mathcal{I}\) is a mapping \(\phi :\mathcal{V}\to [0,1]\) such that \(\sum_{\nu \in \mathcal{V}_X}\phi (\nu) = 1\) for all \(X\in \mathcal{X}\) . We interpret the numbers \(\phi (\nu)\) as probabilities and say that an assignment \(\alpha\) is sampled from a soft assignment \(\phi\) (we write \(\alpha \sim \phi\) ) if for each variable \(X\in \mathcal{X}\) we independently draw a value \(\nu \in \mathcal{V}_X\) with probability \(\phi (\nu)\) .